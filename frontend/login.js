document.addEventListener('DOMContentLoaded',()=>{const e=document.getElementById("login-form"),t=document.getElementById("username"),o=document.getElementById("password"),s=document.getElementById("error-message");e.addEventListener("submit",async n=>{n.preventDefault(),s.textContent="";const c=t.value,i=o.value;try{const n=await fetch("http://127.0.0.1:5000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:c,password:i})}),r=await n.json();if(n.ok)window.location.href="/frontend/index.html";else throw new Error(r.error||"Login failed.")}catch(e){s.textContent=e.message}})});